@model KaylaBugTracker.Models.Ticket

@{
    ViewBag.Title = "Dashboard";
}


@*
    Show some parent Project data
    Show Ticket specific data
    Show Ticket Comments
    Show Ticket Attachments*@
<div class="container">
    <div class="row">
		<div class="col-md-offset-1 col-md-10">
			@*Show project data*@
			<p>Project Data</p>
			<br />
			<h2>Project name: @Model.Project.Name</h2>
			<h2>Project name: @Model.Project.Created</h2>
		</div>
    </div>
    <div class="row">
        <div class="col-md-12">
			<p>Ticket Data</p>
			<br />
            @*Show Ticket Data*@
			<h2>Title: @Model.Issue</h2>
			<h2>Priority: @Model.TicketPriority.Name</h2>
			<h2>Status: @Model.TicketStatus.Name</h2>
			<h2>Type: @Model.TicketType.Name</h2>
        </div>
	</div>
	<div class="row">
        <div class="col-md-6">
			@*Show Ticket Comments*@
		</div>
		<div class="col-md-6">
			@*Show Ticket Attachment*@
			@*A mechanism for adding a new attachment*@

			@using (Html.BeginForm("Create", "TicketAttachments", FormMethod.Post, new { enctype = "multipart/form-data" }))
			{
				@Html.AntiForgeryToken()
				@Html.Hidden("TicketId", Model.Id)

				<div class="form-group">
					@Html.Label("File Name", htmlAttributes: new { @class = "control-label col-md-2" })
					<div class="col-md-10">
						@Html.Editor("FileName", new { htmlAttributes = new { @class = "form-control" } })
					</div>
				</div>

				<div class="form-group">
					@Html.Label("Description", htmlAttributes: new { @class = "control-label col-md-2" })
					<div class="col-md-10">
						@Html.TextArea("AttachmentDescription", new { htmlAttributes = new { @class = "form-control" } })
					</div>
				</div>

				<div class="form-group">
					@Html.Label("Attachment", htmlAttributes: new { @class = "control-label col-md-2" })
					<div class="col-md-10">
						<input type="file" name="file" />
					</div>
				</div>

				<div class="form-group">
					<div class="col-md-offset-2 col-md-10">
						<input type="submit" value="Add Attachment" class="btn btn-primary" style="width:100%" />
					</div>
				</div>
			}

			@*A mechanism for displaying and viewing existing attachments*@
			<hr />

			<table class="table">
				<tr>
					<th>
						@Html.DisplayName("Icon")
					</th>
					<th>
						@Html.DisplayName("Name")
					</th>
					<th>
						@Html.DisplayName("File Name")
					</th>
				</tr>

				@foreach (var attachment in Model.TicketAttachments.ToList())
				{
					<tr>
						<td>

						</td>
						<td>
							@Html.DisplayFor(modelItem => attachment.FileName)
						</td>
						<td>
							<a target="_blank" href="@attachment.FilePath">@attachment.FilePath</a>
							@Html.DisplayFor(modelItem => attachment.FilePath)
						</td>
					</tr>
				}

			</table>

		</div>
    </div>
</div>